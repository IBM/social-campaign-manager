# APIs

Data displayed on the dashboard comes from a number of Application
Programming Interfaces (APIs) IBM have developed. The APIs are used by
two applications. One is the Social Campaign Manager front-end
application displaying campaign data, used to control social media
campaigns. The other is a Dashboard social widget which displays a
shortened view of the campaigns.


| Method | Endpoint | Description |
| :---: | :---: | --- |
| GET | **/campaign** | Will return a list of campaigns in the database, with id, name, created date and the description created for the campaign. |
| GET | **/campaign?campaignId={xxx}** | Will return the full data contained for the given campaign. <br/> Attributes include:<br/><ul><li>id – campaign Id</li><li>_rev – revision, used to save in Cloudant and display version on edit page</li><li>Name – campaign name</li><li>Description – campaign description</li><li>consent_message – privacy policy and consent form statement starting each campaign</li><li>required_questions – all required governance questions like  “Who is running this campaign?”, etc. </li><li>status – campaign status (Draft, Running, Stopped)</li><li>questions – campaign questions array</li><li>picker_intent – workspace picker intent</li><li>picker_intent_example – workspace picker intent examples</li><li>twitter_initial_tweet – initial tweet text</li><li>twitter_initial_tweet_id – initial tweet id</li><li>twitter_hashtag – hashtag used in twitter campaign</li><li>twitter_initial_tweet_link – link to initial tweet to be displayed on edit page</li><li>chat_introduction – first chat message introduction after consent form agreed to by the participant</li><li>language – campaign language</li><li>watson_workspace_id – Watson Assistant workspace (skill) id</li><li>watson_workspace – Watson Assistant workspace object (saved after posting to Watson)</li><li>created – date created</li><li>created_by – created by user id</li><li>updated – date of last update</li><li>updated_by – updated by user id</li><li>published – published date</li><li>published_by – published by user id</li></ul> |
| POST | **/campaign-draft** | Expecting a ‘campaign’ json property in the body, will create the given campaign draft. Requires just the minimal campaign data name and description. Creates the campaign full body. |
| POST | **/campaign/publish** | Expecting a ‘campaign’ json property in the body, will generate a new campaign dialog based on the current campaign questions, create a Watson Assistant skill, update the Workspace Picker intents  and save the campaign to the database. |
| PUT | **/campaign/save** | Expecting a ‘campaign’ json property in the body. Saves the campaign to the database** but does not publish to Watson Assistant. |
| DELETE | **/campaign** | Expecting a ‘campaignId’ and ‘campaignRev’ (revision (aka version)), will delete the associated document version. |
| GET | **/campaign-participants?campaignId={xxx}** | Will return a list of participants with the following attributes: <br/> <ul> <li>socialMediaUserId – participant identifier</li> <li>age – participant provided age</li> <li>gender – participant provided gender</li> <li>locationName – participant city / town</li> <li>locationData – participant city with gps coorinates</li> <li>campaigns – campaigns this participant engaged with</li> </ul> |
| GET | **/campaign-tweets?campaignId={xxx}** | Will return a list of participants with the following attributes: <br/> <ul> <li>socialMediaObjectType – tweet</li> <li>campaignId – campaign identifier</li> <li>timestamp</li> <li>nlu - Natural Language Understanding results, providing semantic analysis, emotions, keywords, entites and entity mentions</li> <li>language – campaign language</li> <li>rawMessage – raw message text</li> <li>twitterThreadId – twitter thread id – initial campaign tweet number</li> </ul> |
| GET | **/campaign-responses?campaignId={xxx}** | Will return a list of participants with the following attributes: <br/> <li>campaignId – campaign identifier</li> <li>socialMediaObjectType – direct-message</li> <li>socialMediaUserId – participant identifier</li> <li>rawMessage – raw message text</li> <li>location – city / town of participant</li> <li>timestamp </li> <li>dialogNode – question being answered</li> <li>nlu – Natural Language Understanding results, providing semantic analysis, emotions, keywords, entites and entity mentions  </li> <li>language – language of the campaign </li> <li>isUnknownResponse – flag if unusual response </li> <li>recognisedPredefinedAnswer – Watson recognised intent / entity values (for example multiple choice answers or yes/no) </li> |
| GET | **/campaign-results/widget** | A consolidated version of the campaign results and semantic analysis to be used in a website embedded widget. Showing the tone and general semantic view of the campaign. |

